<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

      <title>Aircontrol Camera API</title>
    
          <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="_static/theme.css " type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="_static/theme-vendors.js"></script> -->
      <script src="_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="Aircontrol Other API" href="other_API.html" />
  <link rel="prev" title="Aircontrol Lidar API" href="lidar_API.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="index.html" class="home-link">
    
      <img class="logo" src="_static/logo_original_large-128_x_128.png" alt="logo"/>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



  
    <div class="nav-item">
      <a href="https://github.com/snlpatel001213/AirControl/"
        class="nav-link external">
          Github <outboundlink></outboundlink>
      </a>
    </div>
  

    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



  
    <div class="nav-item">
      <a href="https://github.com/snlpatel001213/AirControl/"
        class="nav-link external">
          Github <outboundlink></outboundlink>
      </a>
    </div>
  

            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="index.html#welcome-to-aircontrol-s-documentation">Contents:</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 ">
            
              <a href="doxygen_readme.html" class="reference internal ">System Requirement</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="getting_started.html" class="reference internal ">Getting Started</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="working_with_binaries.html" class="reference internal ">Working With Binaries</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="working_with_source.html" class="reference internal ">Working With Sources</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="input_output_API.html" class="reference internal ">Aircontrol Input API</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="time_of_day_API.html" class="reference internal ">Aircontrol time of Day API</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="lidar_API.html" class="reference internal ">Aircontrol Lidar API</a>
            

            
          </li>

        
          <li class="toctree-l1 current">
            
              <a href="#" class="reference internal current">Aircontrol Camera API</a>
            

            
              <ul>
                
                  <li class="toctree-l2"><a href="#aircontrol-camera-api" class="reference internal">Aircontrol Camera API</a></li>
                
                  <li class="toctree-l2"><a href="#reference" class="reference internal">Reference</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="other_API.html" class="reference internal ">Aircontrol Other API</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
    <li>Aircontrol Camera API</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="lidar_API.html"
       title="previous chapter">← Aircontrol Lidar API</a>
  </li>
  <li class="next">
    <a href="other_API.html"
       title="next chapter">Aircontrol Other API →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="aircontrol-camera-api">
<h1>Aircontrol Camera API<a class="headerlink" href="#aircontrol-camera-api" title="Permalink to this headline">¶</a></h1>
<section id="camera-placement">
<h2>Camera Placement<a class="headerlink" href="#camera-placement" title="Permalink to this headline">¶</a></h2>
<p>AirControl Airplane has two cameras. One is in the Cockpit and another
is a follow camera. Both the camera can be used for capturing
screenshots while in flight.</p>
</section>
<section id="python-api">
<h2>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">Python API has a <code class="docutils literal notranslate"><span class="pre">set_camera</span></code> function to set the camera properties.
<code class="docutils literal notranslate"><span class="pre">set_camera</span></code> function takes the following arguments: -
InputControlType (str, optional): It can be either <code class="docutils literal notranslate"><span class="pre">Code</span></code> or
<code class="docutils literal notranslate"><span class="pre">Other</span></code>. This is to control the internal mechanism and prevent
repeated calling in already set variables.</div>
<div class="line">If <code class="docutils literal notranslate"><span class="pre">InputControlType</span></code> is set to ‘Code’, the camera cannot be
controlled from Keyboard or Joystick. If <code class="docutils literal notranslate"><span class="pre">InputControlType</span></code> is set
to ‘Other’, the camera can be only controlled from Keyboard or
Joystick. Defaults to “Code”. - ActiveCamera (int, optional):
Aircontrol Airplane has two cameras inside the Cockpit and outside the
Airplane. The Camera inside the Cockpit is indexed as 0. The outside
of the Airplane is indexed as 1. <code class="docutils literal notranslate"><span class="pre">ActiveCamera</span></code> can be used to
select the scene camera. Defaults to 1. - IsCapture (bool, optional):
<code class="docutils literal notranslate"><span class="pre">Iscapture</span></code> if true the screenshot will be captured. Defaults to
False. - CaptureCamera (int, optional): <code class="docutils literal notranslate"><span class="pre">CaptureCamera</span></code> defines
which camera should be used for capturing the scene. Defaults to 1. -
CaptureType (int, optional): Choose between different capture types.
Defaults to 1. - CaptureWidth (int, optional): Width of the captured
image. Defaults to 256. - CaptureHeight (int, optional): Height of the
captured image. Defaults to 256. - IsOutput (bool, optional): By
default <code class="docutils literal notranslate"><span class="pre">set_camera</span></code> function only sets the internal state.
<code class="docutils literal notranslate"><span class="pre">set_camera</span></code> only provides log output and not the actual captured
image. <code class="docutils literal notranslate"><span class="pre">set_control</span></code> when called it returns the actual output. IF
you want to force <code class="docutils literal notranslate"><span class="pre">set_camera</span></code> to return the image, set <code class="docutils literal notranslate"><span class="pre">IsOutput</span></code>
to True. Defaults to False.</div>
</div>
<p><strong>Capture Types</strong></p>
<p>One of the main challenges in Machine Learning is the task of getting
large amounts of training data in the right format. Deep learning, and
machine learning more generally, needs huge training sets to work
properly. Virtual worlds can provide a wealth of training data. However,
it must consist of more than just the final image: object
categorization, optical flow, etc</p>
<p><code class="docutils literal notranslate"><span class="pre">Capture</span> <span class="pre">Types</span></code> can be set to the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 13%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>C
apt
ure
T
ype</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Scene
Capture</p></td>
<td><p>Capture from scene Camera</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>I
nstance
Segme
ntation</p></td>
<td><p>Each object in the scene gets unique color</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>S
emantic
segme
ntation</p></td>
<td><p>Objects are assigned color based on their category</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Depth</p></td>
<td><p>Pixels are colored according to their motion in the
relation to the camera</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Normals</p></td>
<td><p>Surfaces are colored according to their orientation
in relation to the camera</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Optical
Flow</p></td>
<td><p>Pixels are colored according to their distance from
the camera (Only visible when Airplane or Object in
reference are moving)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="implementation-details">
<h2>Implementation details<a class="headerlink" href="#implementation-details" title="Permalink to this headline">¶</a></h2>
<p>First of all <code class="docutils literal notranslate"><span class="pre">AC_Airplane_CameraController.OnSceneChange()</span></code> calls
ColorEncoding class to encode unique object idenitifier and layer as RGB
color. These colors are stored in MaterialPropertyBlock for each object
and are automatically passed into the shaders when rendering.</p>
<p>Upon start <code class="docutils literal notranslate"><span class="pre">AC_Airplane_CameraController</span></code> component creates hidden
camera for every single pass of output data (image segmentation, optical
flow, depth, etc). These cameras allow to override usual rendering of
the scene and instead use custom shaders to generate the output. These
cameras are attached to different scene camera using
<code class="docutils literal notranslate"><span class="pre">Camera.targetDisplay</span> <span class="pre">property</span></code> - handy for preview in the Editor.</p>
<p>For Image segmentation and Object categorization pass special
replacement shader is set with `Camera.SetReplacementShader(). It
overrides shaders that would be otherwise used for rendering and instead
outputs encoded object id or layer.</p>
<p>Optical flow and Depth pass cameras request additional data to be
rendered with <code class="docutils literal notranslate"><span class="pre">DepthTextureMode.Depth</span></code> and
<code class="docutils literal notranslate"><span class="pre">DepthTextureMode.MotionVectors</span></code> flags. Rendering of these cameras is
followed by drawing full screen quad <code class="docutils literal notranslate"><span class="pre">CommandBuffer.Blit()</span></code> with
custom shaders that convert 24/16bit-per-channel data into the 8-bit RGB
encoding.</p>
</section>
<section id="importing-requirements">
<h2>Importing Requirements<a class="headerlink" href="#importing-requirements" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">AirControl.communicator</span> <span class="kn">import</span> <span class="n">Communicator</span>
<span class="kn">from</span> <span class="nn">AirControl</span> <span class="kn">import</span> <span class="n">schemaDef</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">PIL.Image</span> <span class="k">as</span> <span class="nn">Image</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span>  <span class="n">imshow</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">Communicator</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="examples-cockpit-camera">
<h2>Examples (Cockpit Camera)<a class="headerlink" href="#examples-cockpit-camera" title="Permalink to this headline">¶</a></h2>
<p><strong>Scene Capture</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id1">
<img alt="png" src="_images/camera_example_7_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Instance Segmentation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id2">
<img alt="png" src="_images/camera_example_9_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Semantic segmentation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id3">
<img alt="png" src="_images/camera_example_11_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Depth</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id4">
<img alt="png" src="_images/camera_example_13_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Normals</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id5">
<img alt="png" src="_images/camera_example_15_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Optical Flow</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id6">
<img alt="png" src="_images/camera_example_17_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="example-external-camera">
<h2>Example (External Camera)<a class="headerlink" href="#example-external-camera" title="Permalink to this headline">¶</a></h2>
<p><strong>Scene Capture</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id7">
<img alt="png" src="_images/camera_example_7_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Instance Segmentation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id8">
<img alt="png" src="_images/camera_example_22_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Semantic segmentation</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id9">
<img alt="png" src="_images/camera_example_24_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Depth</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id10">
<img alt="png" src="_images/camera_example_26_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Normals</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id11">
<img alt="png" src="_images/camera_example_28_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Optical Flow</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## no movement no optcal flow</span>
<span class="n">camera_schema</span> <span class="o">=</span> <span class="n">schemaDef</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">ActiveCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">IsCapture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CaptureCamera</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CaptureType</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">CaptureHeight</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">CaptureWidth</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">IsOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="n">camera_schema</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span>  <span class="n">connection</span><span class="o">.</span><span class="n">receive_data</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ScreenCapture&#39;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">image</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">image</span><span class="p">)))</span>
    <span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id12">
<img alt="png" src="_images/camera_example_30_0.png" />
<figcaption>
<p><span class="caption-text">png</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://docs.unity3d.com/Manual/SL-ShaderReplacement.html">Replacement
Shaders</a></p></li>
<li><p><a class="reference external" href="https://docs.unity3d.com/Manual/GraphicsCommandBuffers.html">Command
Buffers</a></p></li>
<li><p><a class="reference external" href="https://docs.unity3d.com/Manual/SL-CameraDepthTexture.html">Depth and Motion
Vectors</a></p></li>
<li><p><a class="reference external" href="https://docs.unity3d.com/ScriptReference/MaterialPropertyBlock.html">MaterialPropertyBlock</a></p></li>
</ol>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="lidar_API.html"
       title="previous chapter">← Aircontrol Lidar API</a>
  </li>
  <li class="next">
    <a href="other_API.html"
       title="next chapter">Aircontrol Other API →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2022, Sunil Patel.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.1 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>