Aircontrol Lidar API
====================

The Aircontrol Lidar API facilitates communication with simulated LIDAR
in Unity. The lidar script uses the Raycast feature of Unity Game
Engine. The distance array, of float type, consists of 360 members, the
ith member storing the distance at which the ray hit an object at the
ith degree.

Importing Requirements
----------------------

.. code:: ipython3

    from airctrl import environment
    from pprint import pprint
    import PIL.Image as Image
    import base64
    import numpy as np
    from io import BytesIO
    from matplotlib.pyplot import  imshow
    import matplotlib.pyplot as plt
    
    A =  environment.Trigger()



.. parsed-literal::

    Now play the environment and call call method `Action.get_connected` to get connected


.. code:: ipython3

    # get connected to server
    A.get_connected()

Lidar Placement
---------------

Lidar is placed in the cockpit, Attached to the cockpit camera. This
ensures that all the distance are measured with respect to the cockpit.

Python API
----------

-  InputControlType (str, optional): It can be either ``Code`` or
   ``Other``. This is to control the internal mechanism and prevent
   repeated calling in already set variables.
   If ``InputControlType`` is set to ‘Code’, the camera cannot be
   controlled from Keyboard or Joystick. If ``InputControlType`` is set
   to ‘Other’, the camera can be only controlled from Keyboard or
   Joystick. Defaults to “Code”.
-  Range (float, optional): Range of the Lidar. Defaults to 100000.0.
-  Density (int, optional): Number of Raycast spread across 360 degrees.
   Defaults to 360.
-  IsActive (bool, optional): If lidar is set to active or not. Defaults
   to False.
-  IsOutput (bool, optional): By default ``step`` function only sets the
   internal state. ``step`` only provides log output and not the actual
   captured image. ``set_control`` when called it returns the actual
   output. IF you want to force ``step`` to return the image, set
   ``IsOutput`` to True. Defaults to False.

.. code:: ipython3

    output = A.set_lidar(InputControlType="Code", Range=100000.0, Density=360, IsActive=False,IsOutput=True)
    lidar_output = output['LidarPointCloud'] # get lidar output
    pprint(lidar_output)


.. parsed-literal::

    [100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     28.8817158,
     28.01196,
     27.201086,
     26.44368,
     25.7349281,
     25.0706158,
     24.4470043,
     23.8607483,
     23.3088837,
     22.7887573,
     22.2979755,
     21.8344059,
     21.3961029,
     20.98131,
     20.58845,
     20.2160759,
     19.862875,
     19.5276527,
     19.2093086,
     18.9068451,
     18.61934,
     18.3459587,
     18.0859146,
     17.8384972,
     17.60305,
     17.3789558,
     17.1656647,
     16.9626465,
     16.7694263,
     16.5855522,
     16.41061,
     16.244215,
     16.0860138,
     15.9356718,
     15.7928791,
     15.65735,
     15.5288162,
     15.4070349,
     15.2917662,
     15.1827993,
     15.0799379,
     14.9829931,
     14.8917933,
     14.80618,
     14.7260075,
     14.6511345,
     14.5814409,
     14.5168066,
     14.4571276,
     14.4023075,
     14.3522549,
     14.3068943,
     14.2661486,
     14.2299585,
     14.1982651,
     14.17102,
     14.14818,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     1859.32068,
     881.0664,
     570.7054,
     422.636383,
     329.704468,
     278.8369,
     238.657761,
     208.824387,
     185.6713,
     167.1856,
     152.308167,
     139.9329,
     129.176346,
     119.989258,
     112.054039,
     105.133354,
     99.04623,
     93.65235,
     88.8413,
     84.52483,
     80.63186,
     77.10415,
     73.89371,
     70.9607,
     68.27162,
     65.7982559,
     63.5164757,
     61.405735,
     59.459446,
     57.6536255,
     55.97081,
     54.39954,
     52.9297752,
     51.5526428,
     50.26024,
     49.04566,
     47.90263,
     46.8256073,
     45.8096046,
     44.85011,
     43.9431,
     43.0849075,
     42.2731056,
     41.50677,
     40.77995,
     40.09014,
     39.4350777,
     38.8127251,
     38.2211647,
     37.6586723,
     37.12364,
     36.6145744,
     36.1301651,
     35.66911,
     35.23028,
     34.8125877,
     34.4150543,
     34.03674,
     33.676796,
     33.3344345,
     33.0089226,
     32.6995659,
     32.405735,
     32.1268425,
     31.8623276,
     31.61168,
     31.3744316,
     31.1501312,
     30.9383755,
     30.7387772,
     30.5509853,
     30.3746719,
     30.20953,
     30.0552788,
     29.9116669,
     29.77844,
     29.6553936,
     2.16294241,
     2.10318184,
     2.07182574,
     2.05951381,
     1.93164814,
     1.93017673,
     1.92929482,
     1.92900109,
     1.929295,
     1.93017685,
     28.9281578,
     28.91629,
     28.9132481,
     28.9190044,
     28.93358,
     28.9570026,
     28.9892921,
     29.03051,
     29.080719,
     29.1399937,
     29.2084217,
     29.2861176,
     29.3731956,
     29.4697952,
     29.5760765,
     29.6922,
     29.8183613,
     29.9547558,
     30.1016254,
     30.2591953,
     30.4277477,
     30.6075554,
     30.7989464,
     31.0022488,
     31.2178249,
     31.446064,
     31.6873913,
     31.9422569,
     32.21114,
     32.49458,
     32.79312,
     33.1073837,
     33.4380074,
     33.7856941,
     34.15121,
     34.5353432,
     34.93899,
     35.36308,
     35.8086357,
     36.27675,
     36.76861,
     37.2855072,
     37.8288422,
     38.4001045,
     39.00095,
     39.63316,
     40.298687,
     40.9996529,
     41.7383652,
     42.51738,
     43.3394775,
     44.2077141,
     45.1255074,
     46.0965347,
     47.12493,
     48.21529,
     49.3726921,
     50.6028671,
     51.9120827,
     53.3075066,
     54.7971764,
     56.3902245,
     58.0968361,
     59.9288139,
     61.88158,
     63.97362,
     66.23298,
     68.67938,
     71.33599,
     74.2299347,
     77.39319,
     80.86384,
     84.73878,
     89.0304642,
     93.8101349,
     99.1640854,
     105.200233,
     112.055038,
     119.904541,
     128.978729,
     139.584915,
     151.8112,
     166.374817,
     183.202362,
     203.835587,
     229.785126,
     266.6534,
     317.838867,
     392.151184,
     500.0665,
     703.8849,
     1262.71509,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     14.7312546,
     14.7524986,
     14.7783117,
     14.8087339,
     14.8438139,
     14.8836031,
     14.9281654,
     14.9775734,
     15.0319023,
     15.0912437,
     15.1556845,
     15.22534,
     15.3003187,
     15.3807478,
     15.4667654,
     15.5585155,
     15.6561565,
     15.7598619,
     15.8698177,
     15.9862261,
     16.1092911,
     16.2392521,
     16.376358,
     16.52088,
     16.6730919,
     16.8333111,
     17.0018654,
     17.17912,
     17.3654575,
     17.561285,
     17.7670517,
     17.98324,
     18.2103729,
     18.44901,
     18.6997566,
     18.9632626,
     19.24025,
     19.53148,
     19.8378124,
     20.1601353,
     20.4994545,
     20.8568516,
     21.233511,
     21.6307545,
     22.0499725,
     22.4927464,
     22.9608059,
     23.4560585,
     23.9806232,
     24.5368214,
     25.1272621,
     25.7548676,
     26.4228935,
     27.1349678,
     27.8952122,
     28.7082863,
     29.5794525,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0]


Alternatively one can specify ``IsOutput`` to ``False`` and get output
using reply to ``schemaDef.set_control`` function call.

.. code:: ipython3

    output = A.set_lidar(InputControlType="Code", Range=100000.0, Density=360, IsActive=False,IsOutput=False)
    # just log output as `IsOutput` is set to false
    print("Just log output", output)



.. parsed-literal::

    Just log output {'Log': ''}


.. code:: ipython3

    # use set_control function
    output = A.step(IsOutput=True)
    lidar_output = output['LidarPointCloud'] # get lidar output
    pprint(lidar_output)


.. parsed-literal::

    [100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     28.7895947,
     27.9257717,
     27.1203041,
     26.367794,
     25.6635246,
     25.0033245,
     24.38347,
     23.8006954,
     23.2520313,
     22.7348652,
     22.2468357,
     21.7858162,
     21.3498821,
     20.9373112,
     20.5465145,
     20.1760788,
     19.8246956,
     19.4911747,
     19.1744366,
     18.8734856,
     18.5874081,
     18.3153687,
     18.0566,
     17.8103924,
     17.576088,
     17.3530884,
     17.14083,
     16.9387989,
     16.7465172,
     16.5635414,
     16.3894558,
     16.2238865,
     16.066473,
     15.9168844,
     15.7748184,
     15.639987,
     15.512126,
     15.39099,
     15.2763491,
     15.1679859,
     15.06571,
     14.9693308,
     14.87868,
     14.7936029,
     14.7139482,
     14.6395836,
     14.57038,
     14.5062256,
     14.4470148,
     14.3926535,
     14.3430529,
     14.2981319,
     14.257822,
     14.2220583,
     14.1907854,
     14.1639547,
     14.7635,
     100000.0,
     100000.0,
     2663.653,
     1116.207,
     629.2362,
     449.1368,
     338.9602,
     283.6346,
     242.656052,
     210.822128,
     186.422363,
     167.130127,
     151.539719,
     138.838821,
     127.85199,
     118.510048,
     110.471687,
     103.484,
     97.35564,
     91.9389343,
     87.1184,
     82.80212,
     78.91628,
     75.4006958,
     72.2061,
     69.29142,
     66.62243,
     64.17025,
     61.9103355,
     59.8218269,
     57.8866577,
     56.08933,
     54.43007,
     52.881012,
     51.4329338,
     50.0768738,
     48.8049927,
     47.6102638,
     46.4864349,
     45.4279671,
     44.42985,
     43.48762,
     42.5972443,
     41.755043,
     40.957737,
     40.2052956,
     39.49248,
     38.8160934,
     38.1739349,
     37.5639343,
     36.9842033,
     36.433033,
     35.90882,
     35.41012,
     34.9355621,
     34.4839325,
     34.0540581,
     33.6449127,
     33.2554779,
     32.88486,
     32.5322151,
     32.1967545,
     31.87775,
     31.5745335,
     31.2864742,
     31.0129738,
     30.7535076,
     30.50756,
     30.2746677,
     30.05439,
     29.8463173,
     29.6500778,
     29.4653053,
     29.2917061,
     29.1289539,
     28.9767857,
     28.8349266,
     28.7031517,
     28.58125,
     28.4690075,
     28.3662529,
     2.16294384,
     2.10318184,
     2.07182574,
     2.05951428,
     1.931648,
     1.93017662,
     1.92929482,
     1.92900085,
     1.92929482,
     1.93017662,
     27.8257751,
     27.8282776,
     27.8392715,
     27.85875,
     27.8867626,
     27.9233513,
     27.9685535,
     28.0224724,
     28.0851555,
     28.1567287,
     28.2372742,
     28.32694,
     28.42587,
     28.53421,
     28.6521454,
     28.7798538,
     28.9175644,
     29.0654869,
     29.22388,
     29.3930149,
     29.5731831,
     29.7646847,
     29.9678783,
     30.1831188,
     30.4108067,
     30.6513615,
     30.9052467,
     31.1729412,
     31.4549885,
     31.751936,
     32.0644035,
     32.3930473,
     32.7385864,
     33.1017532,
     33.4833832,
     33.88436,
     34.3056374,
     34.74824,
     35.21328,
     35.7019653,
     36.2155647,
     36.7555428,
     37.32339,
     37.9208069,
     38.5495834,
     39.2117157,
     39.90936,
     40.64488,
     41.42088,
     42.24019,
     43.1059647,
     44.0216675,
     44.99114,
     46.0185966,
     47.1087456,
     48.2668533,
     49.4988,
     50.8112144,
     52.21141,
     53.7077827,
     55.3098068,
     57.0282822,
     58.87545,
     60.84944,
     62.9643021,
     65.2521,
     67.7338638,
     70.43412,
     73.38185,
     76.61146,
     80.1639938,
     84.12101,
     88.53892,
     93.4766159,
     99.02963,
     105.318069,
     112.496162,
     120.763466,
     130.385254,
     141.621887,
     154.7242,
     170.555817,
     189.339417,
     212.455582,
     242.9852,
     286.7125,
     349.284943,
     445.227936,
     592.7802,
     1005.48785,
     2492.47949,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     14.7922983,
     14.8231716,
     14.8587074,
     14.8989649,
     14.9440031,
     14.9938946,
     15.0487232,
     15.1085739,
     15.1735411,
     15.24373,
     15.3192635,
     15.4002647,
     15.486865,
     15.5792189,
     15.6774874,
     15.7818365,
     15.8924627,
     16.00956,
     16.1333447,
     16.2640514,
     16.4019337,
     16.5472565,
     16.7003078,
     16.8614025,
     17.0308743,
     17.20908,
     17.3964119,
     17.5932846,
     17.8001442,
     18.0174828,
     18.2458286,
     18.4857311,
     18.737812,
     19.00273,
     19.2812023,
     19.5740185,
     19.8820076,
     20.2060947,
     20.5472851,
     20.9066753,
     21.2854729,
     21.6849613,
     22.1066,
     22.5519638,
     23.0227947,
     23.5210438,
     24.0488052,
     24.6084538,
     25.20264,
     25.8343086,
     26.5067234,
     27.2235851,
     27.9890633,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0,
     100000.0]


As the Airplane is a tail dagger, the backside rays of lidar interact
with a ground plane. Due to this hit distance for some of the rays in
the above-shown lidar output is very near to airplane.

|image0|

.. |image0| image:: /home/supatel/Documents/AirControl_20/docs/images/Lidar/5.png

Similarly, lidar interacts with buildings and provides a sense of
nearness.

|image0|

.. |image0| image:: /home/supatel/Documents/AirControl_20/docs/images/Lidar/9.png

1. `Physics.Raycast <https://docs.unity3d.com/ScriptReference/Physics.Raycast.html>`__
